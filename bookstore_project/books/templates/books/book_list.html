{% extends 'index.html' %}

{% block title %}–°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥{% endblock %}

{% block content %}
<div class="book-list-container">
    <h2>–°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥</h2>

    <form method="GET" class="filter-form">
        {{ form.as_p }}
        <button type="submit" class="btn btn-filter">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
    </form>

    <!-- –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É" (–¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤) -->
    {% if user.is_staff %}
        <a href="{% url 'book_create' %}" class="btn btn-add">–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</a>
    {% endif %}

    <div class="books-container">
        {% for book in books %}
            <div class="book-card">
                <h3>{{ book.title }}</h3>
                <p><strong>–ê–≤—Ç–æ—Ä:</strong> {{ book.author }}</p>
                <p><strong>–¶–µ–Ω–∞:</strong> {{ book.price }} —Ä—É–±.</p>

                <form method="post" action="{% url 'add_to_cart' book.pk %}" class="add-to-cart-form">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-add-to-cart">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                </form>

                {% if user.is_staff %}
                    <a href="{% url 'book_update' book.pk %}" class="btn btn-edit">‚úè –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form method="post" action="{% url 'book_delete' book.pk %}" class="delete-form">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-delete">üóë –£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                {% endif %}
            </div>
        {% empty %}
            <p>–ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
